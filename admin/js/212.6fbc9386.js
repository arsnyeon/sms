"use strict";(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[212],{1651:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"auditmainbox"},[e.userdetailVisiable?t("MobileUserdetail",{ref:"userdetailDialog"}):e._e(),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.Sms.slice((e.currentPage1-1)*e.pageSize,e.currentPage1*e.pageSize),border:"","row-class-name":e.tableRowClassName}},[t("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID",width:"50"}}),t("el-table-column",{attrs:{prop:"order_number",label:"订单号",width:"90"}}),t("el-table-column",{attrs:{prop:"userid",label:"所属用户",width:"50"}}),t("el-table-column",{attrs:{prop:"phonenumber",label:"手机号",width:"100"}}),t("el-table-column",{attrs:{prop:"content",label:"内容"}}),t("el-table-column",{attrs:{prop:"reply_code",label:"回复码",width:"70"}}),t("el-table-column",{attrs:{prop:"reply_status",label:"回复状态",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[0==a.row.reply_status?t("el-tag",{attrs:{type:"danger"}},[e._v("未回复")]):e._e(),1==a.row.reply_status?t("el-tag",{attrs:{type:"success"}},[e._v("已回复")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"reply_userid",label:"被谁回复",width:"50"}}),t("el-table-column",{attrs:{prop:"create_time",label:"发布时间",width:"95"}}),t("el-table-column",{attrs:{label:"审核状态",width:"95"},scopedSlots:e._u([{key:"default",fn:function(a){return[0==a.row.audit_status?t("el-tag",{attrs:{type:"warning"}},[e._v("未审核")]):e._e(),1==a.row.audit_status?t("el-tag",{attrs:{type:"success"}},[e._v("已审核")]):e._e()]}}])}),t("el-table-column",{attrs:{prop:"audit_time",label:"审核时间",width:"95"}}),t("el-table-column",{attrs:{prop:"send_status",label:"发送状态",width:"50","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"send_response",label:"发送响应",width:"50","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{prop:"send_result",label:"送达状态",width:"100"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.handleClick(a.row)}}},[e._v("审核")])]}}])})],1),t("div",{staticClass:"pa"},[t("el-pagination",{staticClass:"pagination",attrs:{background:"","current-page":e.currentPage1,"page-size":e.pageSize,"page-sizes":[6,10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.SmsLength,"pager-count:2":""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],r=a(585),i=a(4193),n=a(9415),o={name:"PcAudit",components:{},data(){return{userdetailVisiable:!1,bURL:n.Z.imgurl,currentPage1:1,pageSize:6,ruleForm:{id:"",audit_status:""}}},mounted(){this.$store.dispatch("Sms",{id:this.$route.params.id})},activated(){},computed:{...(0,i.rn)({Sms:e=>e.Sms.Sms,SmsLength:e=>e.Sms.Sms.length})},methods:{openUserdetailDialog(e){this.userdetailVisiable=!0,this.$nextTick((()=>{this.$refs.userdetailDialog.init(e)}))},pointcomments(){this.$message.error("死数据暂时不能点击")},handleSizeChange(e){console.log(`每页 ${e} 条`),console.log(e),this.pageSize=e},handleCurrentChange(e){console.log(`当前页: ${e}`),console.log(e),this.currentPage1=e},tableRowClassName:function({row:e,rowIndex:t}){return"0"==e.audit_status?"primary-row":"发送成功"!=e.send_result&&"0"!=e.send_status?"danger-row":void 0},handleClick(e){console.log(e.id),this.ruleForm.id=e.id,this.ruleForm.audit_status=e.audit_status,this.$confirm("是否通过审核并执行发送短信?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.doSend(this.ruleForm)})).catch((()=>{}))},doSend(e){(0,r.sU)(e).then((e=>{200==e.code?(this.$message.success(e.message),this.$store.dispatch("Sms")):this.$message.error(e.message)}))}}},u=o,d=a(2349),c=(0,d.Z)(u,s,l,!1,null,"325631e5",null),p=c.exports}}]);