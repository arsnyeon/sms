"use strict";(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[381],{7381:function(t,e,r){r.r(e),r.d(e,{default:function(){return n}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"cnm"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-content"},[e("h3",[t._v("支付宝充值")]),t.vi?t._e():e("div",[e("el-form",{ref:"ExtractForm",staticClass:"ExtractForm",attrs:{model:t.ExtractForm,rules:t.rules}},[e("el-form-item",{attrs:{prop:"reply_code"}},[e("el-input",{attrs:{placeholder:"请输入充值金额！"},model:{value:t.ExtractForm.reply_code,callback:function(e){t.$set(t.ExtractForm,"reply_code",e)},expression:"ExtractForm.reply_code"}},[e("template",{slot:"prepend"},[t._v("充值金额")])],2)],1),e("el-form-item",{staticClass:"btn-ground"},[e("el-button",{staticClass:"btn-one",attrs:{type:"success",plain:"",round:""},on:{click:function(e){return t.submitForm("ExtractForm")}}},[t._v("立即充值 ")])],1)],1)],1),t.vi?e("div",{staticClass:"alipayimg"},[e("img",{attrs:{src:`${t.imgurl}`,alt:`${t.imgurl}`},on:{click:function(e){return t.goPay(t.alipayurl)}}}),e("p",{on:{click:function(e){return t.goPay(t.alipayurl)}}},[e("el-tag",[t._v("点我唤起支付宝支付(部分浏览器不支持)")])],1),e("p",[e("el-tag",{attrs:{type:"warning"}},[t._v("无法唤起，请截图使用支付宝扫描二维码支付")])],1),e("p",[e("el-tag",{attrs:{type:"success"}},[t._v("每3秒检测一次支付状态，支付完成自动跳转")])],1)]):t._e()])])])])},a=[],i=(r(901),r(585)),l={name:"MobileAlipay",data(){return{ExtractForm:{userid:"",phonenumber:"",reply_code:""},vi:!1,imgurl:"",outTradeNo:"",alipayurl:"",rules:{reply_code:[{required:!0,message:"请输入金额",trigger:"blur"}]}}},mounted(){let t=localStorage.getItem("userInfo");this.ExtractForm.userid=JSON.parse(t).id},methods:{submitForm(t){this.$refs[t].validate((t=>{if(!t)return console.log("error submit!!"),!1;(0,i.vw)(this.ExtractForm).then((t=>{this.imgurl=t.data,this.outTradeNo=t.outTradeNo,this.alipayurl=t.AlipayUrl,this.vi=!0,200==t.code?(this.$message.success(t.message),this.click()):this.$message.error(t.message)}))}))},toRegister(){this.$router.push({path:"/register"})},goPay(t){window.open(t,"_blank")},resetForm(t){this.$refs[t].resetFields(),this.$message.success("主人，已清空~")},click(){let t=setInterval((()=>{this.fun(t)}),3e3)},fun(t){setTimeout((()=>{(0,i.gE)(this.outTradeNo).then((e=>{let r=e.message;200==e.code?(clearInterval(t),this.$router.push({path:`/user/${this.ExtractForm.userid}`,params:{id:this.ExtractForm.userid}}),console.log(r)):console.log(r)}))}),0)}}},o=l,c=r(2349),u=(0,c.Z)(o,s,a,!1,null,"648b8316",null),n=u.exports}}]);