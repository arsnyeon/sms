"use strict";(self["webpackChunkvue_admin"]=self["webpackChunkvue_admin"]||[]).push([[907],{4907:function(e,s,t){t.r(s),t.d(s,{default:function(){return u}});var r=function(){var e=this,s=e._self._c;return s("div",[s("div",{staticClass:"cnm"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[s("el-form",{ref:"loginForm",staticClass:"loginForm",attrs:{model:e.loginForm,rules:e.rules}},[s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.loginForm.username,callback:function(s){e.$set(e.loginForm,"username",s)},expression:"loginForm.username"}},[s("template",{slot:"prepend"},[e._v("账号")])],2)],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码！"},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}},[s("template",{slot:"prepend"},[e._v("密码")])],2)],1),s("el-form-item",{staticClass:"btn-ground"},[s("el-button",{staticClass:"btn-one",attrs:{type:"primary",plain:"",round:""},on:{click:function(s){return e.submitForm("loginForm")}}},[e._v("立即登录")])],1),s("el-form-item",{staticClass:"btn-ground"},[s("el-button",{staticClass:"btn-two",attrs:{type:"success",plain:"",size:"small"},on:{click:e.toRegister}},[e._v("前往注册")]),s("el-button",{staticClass:"btn-two",attrs:{type:"warning",plain:"",size:"small"},on:{click:function(s){return e.resetForm("loginForm")}}},[e._v("清空输入 ")])],1)],1)],1)])])])},o=[],a=(t(901),t(585)),i={name:"MobileLogin",data(){return{loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"},{min:1,max:12,message:"长度在 6 到 12 个字符的账户",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,max:16,message:"长度在 6 到 16 个字符的密码",trigger:"blur"}]}}},methods:{submitForm(e){this.$refs[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;(0,a.yq)(this.loginForm).then((e=>{let s=e.message;if(200==e.code){window.localStorage.setItem("token",e.token),window.localStorage.setItem("userInfo",JSON.stringify(e.data));let s=e.data.id;"/login"==this.$route.path?(this.$router.push({path:`/user/${s}`,params:{id:s}}),this.$message.success(e.message)):(this.$router.go(0),this.$message.success(e.message))}else this.$message.error(s)}))}))},toRegister(){this.$router.push({path:"/register"})},resetForm(e){this.$refs[e].resetFields(),this.$message.success("主人，已清空~")}}},l=i,n=t(2349),m=(0,n.Z)(l,r,o,!1,null,"1e68a0ba",null),u=m.exports}}]);